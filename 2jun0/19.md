# 사용자 정의 자원

쿠버네티스에서는 사용자가 정의한 자원을 사용할 수 있다.  
이런 자원을 자용자 정의 자원이라고 하나봄.

사용자 정의 컨트롤러를 이용해 API를 만들어야 하는 상황
- 추가하려는 API가 선언적 형식이다.
- 추가한 사용자 정의 자원을 kubectl로 다룰 수 있어야 한다.
- 추가한 타입을 쿠버네티스 대시보드 같은 UI에서 모니터링할 수 있어야 한다.
- 기존에 동작 중인 API를 쿠버네티스에 추가하는 것이 아니라 새로운 API를 개발 중이다.
- 쿠버네티스의 기본 API그룹과 네임스페이스 형식을 맞춰서 새료운 API를 만들 수 있다.
- 추가하려는 사용자 정의 자원이 쿠버네티스 클러스터 안이나 특정 네임스페이스 안에서만 동작해야 한다.
- 쿠버네티스가 제공하는 기본 API 지원 기능들을 활용할 수 있어야 한다.


> 선언적 API는 API가 작은 오브젝트들의 조합으로 이루어진 형태를 뜻한다. (파드 2개를 더 생성하세요 X => 파드 2개가 실행되어야 합니다 O)

사용자 정의 컨트롤러는 직접 만드는 것보다 다음과 같은 도구들을 사용하는게 좋다.  
- kubebuilder: kubernetes-sig에서 관리하는 사용자 정의 컨트롤러
- operator-sdk: 코어OS에서 오퍼레이터 프레임워크의 일부로 내놓은 사용자 정의 컨트롤러
- metacontroller: GCP에서 제공하는 사용자 정의 컨트롤러

## CRD 특징
- 템플릿을 만들 수 있다.
- kube-apiserver가 사용자 정의 저원을 관리함
- 기본 쿠버네티스 지원에 포함된다. (코드를 수정할 필요 X)

## Aggregated API 특징
- Go프로그래밍 언어로 바이너리와 이미지를 만들어야 함. (헉)
- 추가 서비스를 만들어야 함


## 프로메테우스 오퍼레이터
코어OS의 오퍼레이터라는 프레임워크.  
특정 애플리케티션의 생명주기를 자동으로 관리